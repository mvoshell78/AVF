var api = require("api");
var cloudModule = require("ti.cloud");

cloudModule.debug = true;

var userId;

var loginCloud = function(){
	cloudModule.Users.login({
		login : "com.voshell.taco",
		password : "12345"
	}, function(e) {
		if (e.success) {
			console.log("cloud working!");
			api.getJson();
	
		} else {
			alert ("error " + e.message);
		}
	});
};

var saveCloud = function(json) {
	cloudModule.objects.create({
		classname : "randomTacoRecipe",
		fields : {
			shellName : json.shell.name,
		 	shellRecipe : json.shell.recipe,
			mixinName : json.mixin.name,
			mixinRecipe : json.mixin.recipe,
			mixinUrl : json.mixin.url,
			seasoningName : json.seasoning.name,
			seasoningRecipe : json.seasoning.recipe,
			seasoningUrl : json.seasoning.url,
		 	condimentName : json.condiment.name,
			condimentRecipe : json.condiment.recipe,
			condimentUrl : json.condiment.url,
			baseName : json.base_layer.name,
		 	baseRecipe : json.base_layer.recipe,
			baseUrl : json.base_layer.url
		}
	}, function(e) {
		if (e.success) {
			console.log(cloud);
		} else {
			alert ("Cloud no worky");
		}
		
	});
	
};

exports.loginCloud = loginCloud;
exports.saveCloud = saveCloud;